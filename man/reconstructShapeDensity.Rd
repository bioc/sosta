% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reconstructShapePPP.R
\name{reconstructShapeDensity}
\alias{reconstructShapeDensity}
\title{Reconstruct polygon from point pattern density}
\usage{
reconstructShapeDensity(ppp, bndw, thres, dimyx)
}
\arguments{
\item{ppp}{point pattern object of class \code{ppp}}

\item{bndw}{bandwidth of kernel density estimator}

\item{thres}{intensity threshold for the reconstruction}

\item{dimyx}{pixel dimensions of the output image}
}
\value{
sf object of class \code{POLYGON}
}
\description{
This function estimates the density of a spatial point pattern (\code{ppp}),
thresholds the density to create a binary image, and then converts it
to a valid \code{sf} object (polygons).
}
\examples{
spe <- imcdatasets::Damond_2019_Pancreas("spe", full_dataset = FALSE)
pp <- SPE2ppp(spe, marks = "cell_category", image_col = "image_name", image_id = "E04")
pp_sel <- subset(pp, marks == "islet")
bndw <- spatstat.explore::bw.diggle(pp_sel)
dimyx <- getDimXY(pp_sel, 500)
thres <- findIntensityThreshold(pp_sel, bndw = bndw, dimyx = dimyx)
islet_poly <- reconstructShapeDensity(pp_sel, bndw = bndw, thres = thres, dimyx = dimyx)
plot(islet_poly)
}
